//
// WARNING: DO NOT EDIT THIS FILE
//   This file has been generated from the target's JSON hardware description
//

{% set regular_switches = switches | selectattr('type','!=','FSWITCH') | list %}
{% set function_switches = switches | selectattr('type','==','FSWITCH') | list %}

static const mcp_switch_t _switch_defs[] = {
{% for switch in regular_switches %}
  {% if switch.type == '2POS' %}
  {
    .name = "{{ switch.name }}",
    .bit_high = 0,
    .bit_low = (1 << ((({{ switch.gpio }} - 1) * 8) + {{ switch.pin }})),
    .type = SWITCH_HW_2POS,
    .flags = {{ 'SWITCH_HW_INVERTED' if switch.inverted else 0 }}
  },
  {% elif switch.type == '3POS' %}
  {
    .name = "{{ switch.name }}",
    .bit_high = (1 << ((({{ switch.gpio_high }} - 1) * 8) + {{ switch.pin_high }})),
    .bit_low  = (1 << ((({{ switch.gpio_low }} - 1)* 8) + {{ switch.pin_low }})),
    .type = SWITCH_HW_3POS,
    .flags = {{ 'SWITCH_HW_INVERTED' if switch.inverted else 0 }}
  },
  {% endif %}
{% endfor %}
};

static const mcp_switch_t* const _switch_offsets[] = {
  _switch_defs,
{% if function_switches %}
  _switch_defs + {{ regular_switches | count }},
{% endif %}
};

constexpr uint8_t n_switches = {{ regular_switches | count }};
constexpr uint8_t n_fct_switches = {{ function_switches | count }};

constexpr swconfig_t _switch_default_config = (swconfig_t)0
{% for sw in regular_switches %}
  {% if sw.default %}
    | ((swconfig_t)SWITCH_{{ sw.default }} << ({{ loop.index0 }} * SW_CFG_BITS))
  {% endif %}
{% endfor %}
;
